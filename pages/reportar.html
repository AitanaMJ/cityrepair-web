<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CityRepair ‚Äì Reportar Problema</title>
  <!-- Estilos globales -->
  <link rel="stylesheet" href="../src/css/styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
</head>
<body>
  <!-- ===== NAVBAR ===== -->
<header class="navbar">
  <div class="container">
    <div class="brand-left">
      <div class="avatar-sm">E</div>
      <div class="brand-txt">
        <span class="brand-title">CityRepair</span>
        <span class="brand-sub">Sistema de Reportes EDET</span>
      </div>
    </div>

    <nav class="nav-right">
      <a class="nav-item" href="../index.html">
        <span class="icon"><i class="bi bi-house"></i></span> Inicio
      </a>

      <a class="nav-item active" href="./reportar.html" data-auth="citizen">
        <span class="icon"><i class="bi bi-flag"></i></span> Reportar
      </a>

      <a class="nav-item" href="./mis-reportes.html" data-auth="citizen">
        <span class="icon"><i class="bi bi-clipboard2-check"></i></span>
        Mis reportes
      </a>

      <a class="nav-item" href="./contacto.html">
        <span class="icon"><i class="bi bi-telephone"></i></span> Contacto
      </a>

      <!-- Acceder -->
      <a class="nav-item" href="./login.html" data-login-link>
        <span class="icon"><i class="bi bi-box-arrow-in-right"></i></span> Acceder
      </a>

      <!-- Perfil usuario -->
      <div class="nav-item user-pill" id="userMenuBtn" data-user-panel hidden>
        <img src="" class="user-avatar" data-user-avatar>
        <span data-user-name></span>

        <div class="user-dropdown" id="userDropdown" hidden>
          <button id="goProfile">Mi perfil</button>
          <button id="logoutFromMenu">Cerrar sesi√≥n</button>
        </div>
      </div>

      <!-- HAMBURGUESA (SOLO ESTA, NO DUPLICAR) -->
      <button class="hamburger" id="openDrawer" aria-label="Abrir men√∫">
        <i class="bi bi-list"></i>
      </button>
    </nav>
  </div>
  <div class="navbar-divider"></div>
</header>


<!-- ===== DRAWER M√ìVIL ===== -->
<div class="drawer-overlay" id="drawerOverlay"></div>

<aside class="drawer" id="drawer" aria-hidden="true">
  <button class="drawer-close" id="closeDrawer">√ó</button>

  <div class="drawer-header">
    <div class="avatar-sm">E</div>
    <div class="brand-txt">
      <span class="brand-title">CityRepair</span>
      <span class="brand-sub">Sistema de Reportes EDET</span>
    </div>
  </div>

  <nav class="drawer-nav">
    <a class="drawer-link" href="../index.html">Inicio</a>
    <a class="drawer-link active" href="./reportar.html" data-auth="citizen">Reportar</a>
    <a class="drawer-link" href="./mis-reportes.html" data-auth="citizen">Mis Reportes</a>
    <a class="drawer-link" href="./contacto.html">Contacto</a>

    <!-- Solo cuando NO est√° logueado -->
    <a class="drawer-link" href="./login.html" data-login-link id="drawerLogin">
      Acceder
    </a>

    <!-- Solo con sesi√≥n -->
    <a class="drawer-link" href="./perfil.html" data-user-panel hidden>
      Mi perfil
    </a>

    <button class="drawer-link" id="drawerLogout" data-logout hidden>
      Cerrar sesi√≥n
    </button>
  </nav>
</aside>

  <!-- ======= HERO ======= -->
  <section class="hero">
    <div class="container hero-inner">
      <div class="avatar-lg">E</div>
      <h1>Reportar Problema</h1>
      <p class="subtitle">Ingresa los detalles de la incidencia</p>
    </div>
  </section>

  <!-- ======= FORM ======= -->
  <main class="container">
    <form id="form-reporte" class="form-grid" data-firebase="1" novalidate>
      <!-- Tipo de problema -->
      <section class="card form-card">
  <h3 class="card-title">Tipo de Problema <span class="req">*</span></h3>
  <label class="field">
    <select id="tipo" required>
      <option value="">Selecciona el tipo de problema</option>

      <!-- CORTES -->
      <option value="corte-total">Corte de luz total</option>
      <option value="baja-tension">Baja tensi√≥n / corte intermitente</option>

      <!-- POSTES / CABLES -->
      <option value="poste-danado">Poste da√±ado / inclinado</option>
      <option value="cable-caido">Cable ca√≠do / suelto</option>

      <!-- MEDIDOR / EQUIPOS -->
      <option value="medidor-quemado">Medidor quemado</option>
      <option value="luminaria-publica">Luminaria p√∫blica apagada</option>
      <option value="transformador-riesgo">Transformador con ruido / olor raro</option>

      <!-- OTROS -->
      <option value="obra-cercana">Obra en la v√≠a p√∫blica cerca de cables</option>
      <option value="otros">Otros problemas el√©ctricos</option>
    </select>
  </label>
</section>

      <!-- Ubicaci√≥n -->
      <section class="card form-card">
        <h3 class="card-title">Ubicaci√≥n <span class="req">*</span></h3>
        <label class="field">
          <input id="ubicacion" name="direccion" type="text" placeholder="Direcci√≥n exacta" required />
        </label>
        <div class="row">
          <button id="btn-geo" type="button" class="btn btn-outline icon-left">üìç Usar mi ubicaci√≥n actual</button>
          <button id="btn-buscar-dir" type="button" class="btn btn-outline">üîç Buscar</button>
        </div>
      </section>

      <!-- Zona / Localidad -->
      <section class="card form-card">
        <h3 class="card-title">Zona / Localidad <span class="req">*</span></h3>
        <label class="field">
          <select id="zona" required>
            <option value="">Selecciona la zona</option>
            <option value="Banda del R√≠o Sal√≠">Banda del R√≠o Sal√≠</option>
            <option value="Burruyacu">Burruyacu</option>
            <option value="Chicligasta">Chicligasta</option>
            <option value="Cruz Alta">Cruz Alta</option>
            <option value="Famailla">Famailla</option>
            <option value="Graneros">Graneros</option>
            <option value="Juan Bautista Alberdi">Juan Bautista Alberdi</option>
            <option value="La Cocha">La Cocha</option>
            <option value="Leales">Leales</option>
            <option value="Lules">Lules</option>
            <option value="Monteros">Monteros</option>
            <option value="Rio Chico">Rio Chico</option>
            <option value="San Miguel de Tucum√°n">San Miguel de Tucum√°n</option>
            <option value="Simoca">Simoca</option>
            <option value="Tafi del Valle">Tafi del Valle</option>
            <option value="Taf√≠ Viejo">Taf√≠ Viejo</option>
            <option value="Trancas">Trancas</option>
          <option value="Yerba Buena">Yerba Buena</option>
      </select>
        </label>
      </section>

      <!-- Mapa -->
      <section class="card form-card form-span-2">
        <h3 class="card-title">Ubicaci√≥n en el Mapa</h3>
        <div id="coords" class="muted" style="margin-bottom:6px;"></div>
        <div id="map" class="map-box"></div>
        <p class="map-hint muted">Haz clic para marcar la ubicaci√≥n exacta</p>
      </section>


        <!-- Adjuntar im√°genes -->
      <section class="card form-card form-span-2">
        <h3 class="card-title">Fotos del Problema (opcional)</h3>
        <p class="muted" style="margin-bottom: 8px;">
          Agrega una o varias fotos para ayudar a identificar mejor la incidencia.
        </p>
        <label class="field">
          <input
            type="file"
            id="imagenes"
            name="imagenes"
            accept="image/*"
            multiple
          />
        </label>
        <small class="muted">
          Formatos permitidos: JPG, PNG. Peso m√°ximo recomendado por archivo: 5&nbsp;MB.
        </small>
      </section>



      <!-- Descripci√≥n -->
      <section class="card form-card form-span-2">
        <h3 class="card-title">Descripci√≥n del Problema <span class="req">*</span></h3>
        <label class="field">
          <textarea id="descripcion" placeholder="Describe detalladamente el problema que observas..." required></textarea>
        </label>
        <div class="actions">
          <a href="../index.html" class="btn btn-outline">Cancelar</a>
          <button type="submit" class="btn btn-green">Enviar Reporte</button>
        </div>
      </section>
    </form>
  </main>

  <footer class="footer"></footer>
  <!-- Scripts de terceros -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Base UI (drawer, etc.) -->
  <script src="../src/js/app.js"></script>

  <!-- üî• Firebase primero -->
  <script type="module" src="../src/js/firebase.js"></script>

  <!-- üë§ Control de navbar (oculta Acceder / muestra perfil / muestra Cerrar sesi√≥n) -->
  <script type="module" src="../src/js/navbar-auth.js"></script>

  <!-- üö™ Cerrar sesi√≥n -->
  <script type="module" src="../src/js/logout.js"></script>

  <!-- Men√∫ del perfil (Mi perfil + Cerrar sesi√≥n en el avatar) -->
  <script type="module" src="../src/js/profile-menu.js"></script>

  <!-- L√≥gica espec√≠fica del formulario de reportar -->
  <script type="module" src="../src/js/reportar.js"></script>
</body>
</html>
